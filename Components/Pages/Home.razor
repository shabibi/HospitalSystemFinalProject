@page "/"
@inject NavigationManager NavigationManager
@inject IBranchService BranchService



<PageTitle>Home</PageTitle>

<MudText Typo="Typo.h2" Style="color: #33BEC8; text-align: center; font-family: 'Times New Roman', Times, serif;">
    ATA Hospital
</MudText>
<div>
    <MudSelect T="string"
               Label="Find Branch"
               AnchorOrigin="Origin.CenterLeft"
               TransformOrigin="Origin.CenterRight"
               Variant="Variant.Outlined"
               AdornmentIcon="@Icons.Material.Filled.Search"
               AdornmentColor="Color.Tertiary"
               @bind-Value="selectedBranchName"
               OnSelectedItemChanged="OnBranchSelected">
        @foreach (var branch in branches)
        {
            <MudSelectItem Value="@branch.BranchName">@branch.BranchName</MudSelectItem>
        }
    </MudSelect>
</div>
<div class="text-center p-4 rounded shadow-lg" style="background-color: #E0F2F1;">
    <!-- Hospital Logo -->
    <MudImage Fluid="true"
              Src="Images/logo.png"
              Width="300"
              Height="200"
              Alt="Hospital Logo"
              Class="rounded-lg mb-3"
              Style="box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);" />

    <!-- Welcome Title -->
    <MudText Typo="Typo.h3" Style="color: #004D40; font-family: 'Times New Roman', Times, serif;">
        Welcome to ATA Hospital
    </MudText>

    <!-- Description Section -->
    <MudText Typo="Typo.body1" Align="Align.Center" Style="color: #004D40; margin-top: 20px; line-height: 1.8;">
        ATA Hospital is a locally owned and operated medical center, serving the community since 2025. Over the years,
        we have grown from a single-doctor cardiology practice to a multi-specialty hospital, offering comprehensive
        healthcare services for the entire family.
    </MudText>
    <MudText Typo="Typo.body1" Align="Align.Center" Style="color: #004D40; margin-top: 10px; line-height: 1.8;">
        From the very beginning, our mission has been to bring the most qualified and accomplished doctors to Oman.
        Today, we are proud to be home to numerous internationally qualified senior consultants, providing expertise
        across almost every branch of medicine.
    </MudText>
</div>

<!-- Contact Section -->
<div class="container mt-5">
    <MudPaper Class="rounded p-4 shadow-lg" Style="background-color: #E0F2F1;">
        <MudText Typo="Typo.h5" Align="Align.Justify" Style="color: #004D40; margin-bottom: 20px;">
            Contact Us:
        </MudText>

        <!-- Contact Details -->
        <div class="d-flex justify-content-around flex-wrap">
            <!-- Email -->
            <div class="text-center">
                <MudIcon Icon="@Icons.Material.Filled.Email" Color="Color.Tertiary" Size="Size.Large" />
                <MudText Typo="Typo.body2" Style="color: #004D40; margin-top: 5px;">
                    <strong>Email:</strong> contact@codelinehospital.com
                </MudText>
            </div>

            <!-- Location -->
            <div class="text-center">
                <MudIcon Icon="@Icons.Material.Filled.LocationOn" Color="Color.Tertiary" Size="Size.Large" />
                <MudText Typo="Typo.body2" Style="color: #004D40; margin-top: 5px;">
                    <strong>Location:</strong> Al Khuwair, Muscat, Oman
                </MudText>
            </div>

            <!-- GitHub -->
            <div class="text-center">
                <MudIcon Icon="@Icons.Custom.Brands.GitHub" Color="Color.Tertiary" Size="Size.Large" />
                <MudText Typo="Typo.body2" Style="color: #004D40; margin-top: 5px;">
                    <strong>GitHub:</strong>
                    <MudLink Href="https://github.com/shabibi/HospitalSystemFinalProject" Target="_blank"
                             Style="color: #004D40; text-decoration: none;">
                        Project Link
                    </MudLink>
                </MudText>
            </div>
        </div>
    </MudPaper>
</div>



@code {
    private void NavigateToGitHub()
    {
        // Navigate to GitHub URL
        NavigationManager.NavigateTo("https://github.com/shabibi/HospitalSystemFinalProject", true);

    }

    private List<Branch> branches = new();
    private Branch branchDetails = new();
    private string selectedBranchName;

    protected override void OnInitialized()
    {
        // Fetch branches from the service
        branches = BranchService.GetAllBranches().ToList();
    }

    private void OnBranchSelected(string branchName)
    {
        try
        {
            // Fetch branch details from the service
            branchDetails = BranchService.GetBranchDetailsByBranchName(branchName);
        }
        catch (KeyNotFoundException ex)
        {
            // Handle the case where the branch is not found (e.g., show a message)
            Console.WriteLine(ex.Message);
        }
    }
  
}

